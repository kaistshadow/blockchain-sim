cmake_minimum_required(VERSION 3.0 FATAL_ERROR)

cmake_policy(SET CMP0057 NEW)


macro(find_package)
        set(as_subproject OpenSSL_1_1_0h Bitcoin_0_19_1 Bitcoin_0_19_1nw Bitcoin_0_19_1dev CURL_7_70_0 Geth_1_9_1dev Libev_4_33 Monero_0.16.0)
  if (NOT "${ARGV0}" IN_LIST as_subproject )
    _find_package(${ARGV})
  endif()
endmacro()

# MESSAGE( "-------------------------------------------------------------------------------")
# MESSAGE( "SHADOW_DEBUG=${SHADOW_DEBUG}")
# MESSAGE( "SHADOW_PROFILE=${SHADOW_PROFILE}")
# MESSAGE( "SHADOW_TEST=${SHADOW_TEST}")
# MESSAGE( "SHADOW_EXPORT=${SHADOW_EXPORT}")
# MESSAGE( "-------------------------------------------------------------------------------")

# add_subdirectory(bitcoin)
# add_subdirectory(openssl)
# add_subdirectory(curl)
# add_subdirectory(bdb)
# #add_subdirectory(go-ethereum)
# add_subdirectory(libev)
#add_subdirectory(monero)
add_subdirectory(openssl)
add_subdirectory(bdb)
add_subdirectory(curl)

if(OPT_ZCASH STREQUAL ON)
message("--------------------------------------------------------------------------------------")
message("                           Start Zcash build")
message("--------------------------------------------------------------------------------------")
add_subdirectory(zcash)
else(OPT_ZCASH STREQUAL OFF)
  message("--------------------------------------------------------------------------------------")
  message("                           Start bitcoin build")
  message("--------------------------------------------------------------------------------------")
  add_subdirectory(bitcoin)
  #add_subdirectory(go-ethereum)
  add_subdirectory(libev)
endif(OPT_ZCASH STREQUAL OFF)
  